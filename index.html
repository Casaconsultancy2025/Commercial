<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Commercial Rent Agreement Generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    
    <!-- React and Babel for in-browser JSX transpilation -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
      @media print {
        body * {
          visibility: hidden;
        }
        #printable-area, #printable-area * {
          visibility: visible;
        }
        #printable-area {
          position: absolute;
          left: 0;
          top: 0;
          width: 100%;
          height: 100%;
          margin: 0;
          padding: 20px;
          font-size: 12pt;
        }
        .no-print {
          display: none;
        }
      }
    </style>
  </head>
  <body class="bg-slate-50">
    <div id="root"></div>
    
    <script type="text/babel">
      // All application code is now contained within this script tag.
      // Note: `import` and `export` are not used; all components and functions share the same scope.

      // --- From utils/helpers.ts ---
      function numberToWords(num) {
          if (num === 0) return 'Zero';

          const a = ['', 'One', 'Two', 'Three', 'Four', 'Five', 'Six', 'Seven', 'Eight', 'Nine', 'Ten', 'Eleven', 'Twelve', 'Thirteen', 'Fourteen', 'Fifteen', 'Sixteen', 'Seventeen', 'Eighteen', 'Nineteen'];
          const b = ['', '', 'Twenty', 'Thirty', 'Forty', 'Fifty', 'Sixty', 'Seventy', 'Eighty', 'Ninety'];
          
          const inWords = (n) => {
              let str = '';
              if (n > 99) {
                  str += a[Math.floor(n / 100)] + ' Hundred ';
                  n %= 100;
              }
              if (n > 19) {
                  str += b[Math.floor(n / 10)] + ' ' + a[n % 10];
              } else {
                  str += a[n];
              }
              return str.trim();
          };

          let result = '';
          const crore = Math.floor(num / 10000000);
          num %= 10000000;
          const lakh = Math.floor(num / 100000);
          num %= 100000;
          const thousand = Math.floor(num / 1000);
          num %= 1000;
          const remaining = num;

          if (crore > 0) result += inWords(crore) + ' Crore ';
          if (lakh > 0) result += inWords(lakh) + ' Lakh ';
          if (thousand > 0) result += inWords(thousand) + ' Thousand ';
          if (remaining > 0) result += inWords(remaining);

          return result.trim().replace(/\s+/g, ' ');
      }

      function formatDate(dateString, options) {
        if (!dateString) return '';
        const defaultOptions = {
          year: 'numeric',
          month: 'long',
          day: 'numeric',
        };
        try {
          const date = new Date(dateString);
          date.setDate(date.getDate() + 1); 
          return new Intl.DateTimeFormat('en-IN', options || defaultOptions).format(date);
        } catch (error) {
          return 'Invalid Date';
        }
      }

      function formatCurrency(amount) {
        return new Intl.NumberFormat('en-IN', {
          minimumFractionDigits: 0,
          maximumFractionDigits: 0,
        }).format(amount);
      }

      // --- From types.ts ---
      const today = new Date();
      const formattedDate = today.toISOString().split('T')[0];
      const initialAgreementData = {
        executionDate: formattedDate,
        executionPlace: "New Delhi",
        lessorName: "Mr. Sunil Kapoor",
        lessorSonOf: "Shri Kewal Krishan Kapoor",
        lessorAddress: "Plot No.11, Industrial Area, Upmohal Parwanoo Sector-III, Solan Himachal Pradesh-173220",
        lesseeName: "Mr. Tarun Mandhok",
        lesseeSonOf: "",
        lesseeAddress: "",
        premisesAddress: "House No. E-384, Basement, Greater Kailash Part-I, New Delhi-110048",
        leaseStartDate: formattedDate,
        leaseTermMonths: 36,
        lockInMonths: 18,
        monthlyRent: 100000,
        rentIncreasePercent: 5,
        securityDeposit: 200000,
        advanceRent: 100000,
        penaltyPerDay: 3000,
        noticePeriodMonths: 1,
        purpose: "residential/official",
      };

      // --- From components/AgreementForm.tsx ---
      const FormSection = ({ title, children }) => (
        <div className="bg-white p-6 rounded-lg shadow-md mb-6">
          <h2 className="text-xl font-semibold text-slate-700 border-b border-slate-200 pb-3 mb-4">{title}</h2>
          <div className="grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-4">
            {children}
          </div>
        </div>
      );

      const InputField = ({ label, name, value, onChange, type = 'text', fullWidth = false, isTextArea = false }) => (
        <div className={fullWidth ? 'sm:col-span-2' : ''}>
          <label htmlFor={name} className="block text-sm font-medium text-slate-600 mb-1">{label}</label>
          {isTextArea ? (
             <textarea id={name} name={name} value={value} onChange={onChange} rows={3} className="block w-full px-3 py-2 bg-slate-50 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-sky-500 focus:border-sky-500 sm:text-sm transition" />
          ) : (
             <input type={type} id={name} name={name} value={value} onChange={onChange} className="block w-full px-3 py-2 bg-slate-50 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-sky-500 focus:border-sky-500 sm:text-sm transition" />
          )}
        </div>
      );

      const AgreementForm = ({ data, setData }) => {
        const handleChange = (e) => {
          const { name, value, type } = e.target;
          setData(prev => ({
            ...prev,
            [name]: type === 'number' ? parseFloat(value) || 0 : value,
          }));
        };
        
        const handleRentChange = (e) => {
          const value = e.target.value;
          const numericValue = parseFloat(value) || 0;
          setData(prev => ({
            ...prev,
            monthlyRent: numericValue,
          }));
        };

        return (
          <div className="space-y-6">
            <FormSection title="Agreement Details">
              <InputField label="Execution Date" name="executionDate" type="date" value={data.executionDate} onChange={handleChange} />
              <InputField label="Execution Place" name="executionPlace" value={data.executionPlace} onChange={handleChange} />
            </FormSection>

            <FormSection title="Lessor (Landlord) Details">
              <InputField label="Lessor Name" name="lessorName" value={data.lessorName} onChange={handleChange} />
              <InputField label="S/o (Son of)" name="lessorSonOf" value={data.lessorSonOf} onChange={handleChange} />
              <InputField label="Lessor Address" name="lessorAddress" value={data.lessorAddress} onChange={handleChange} fullWidth isTextArea />
            </FormSection>

            <FormSection title="Lessee (Tenant) Details">
              <InputField label="Lessee Name" name="lesseeName" value={data.lesseeName} onChange={handleChange} />
              <InputField label="S/o (Son of)" name="lesseeSonOf" value={data.lesseeSonOf} onChange={handleChange} />
              <InputField label="Lessee Address" name="lesseeAddress" value={data.lesseeAddress} onChange={handleChange} fullWidth isTextArea />
            </FormSection>

            <FormSection title="Property & Lease Terms">
              <InputField label="Leased Premises Address" name="premisesAddress" value={data.premisesAddress} onChange={handleChange} fullWidth isTextArea />
              <InputField label="Lease Start Date" name="leaseStartDate" type="date" value={data.leaseStartDate} onChange={handleChange} />
              <InputField label="Lease Term (Months)" name="leaseTermMonths" type="number" value={data.leaseTermMonths} onChange={handleChange} />
              <InputField label="Lock-in Period (Months)" name="lockInMonths" type="number" value={data.lockInMonths} onChange={handleChange} />
              <InputField label="Purpose of Use" name="purpose" value={data.purpose} onChange={handleChange} />
            </FormSection>
            
             <FormSection title="Financials">
              <InputField label="Monthly Rent (₹)" name="monthlyRent" type="number" value={data.monthlyRent} onChange={handleRentChange} />
              <div className="sm:col-span-2 text-sm text-slate-500 -mt-2">
                  In words: Rupees {numberToWords(data.monthlyRent)} Only
              </div>
              <InputField label="Rent Increase (%)" name="rentIncreasePercent" type="number" value={data.rentIncreasePercent} onChange={handleChange} />
              <InputField label="Security Deposit (₹)" name="securityDeposit" type="number" value={data.securityDeposit} onChange={handleChange} />
              <div className="sm:col-span-2 text-sm text-slate-500 -mt-2">
                  In words: Rupees {numberToWords(data.securityDeposit)} Only
              </div>
              <InputField label="Advance Rent (₹)" name="advanceRent" type="number" value={data.advanceRent} onChange={handleChange} />
              <div className="sm:col-span-2 text-sm text-slate-500 -mt-2">
                  In words: Rupees {numberToWords(data.advanceRent)} Only
              </div>
            </FormSection>

            <FormSection title="Clauses & Conditions">
              <InputField label="Penalty per Day (₹)" name="penaltyPerDay" type="number" value={data.penaltyPerDay} onChange={handleChange} />
              <InputField label="Notice Period (Months)" name="noticePeriodMonths" type="number" value={data.noticePeriodMonths} onChange={handleChange} />
            </FormSection>
          </div>
        );
      };

      // --- From components/AgreementPreview.tsx ---
      const Clause = ({ number, children }) => (
          <li className="flex">
              <div className="w-10 flex-shrink-0 font-semibold">{number}.</div>
              <div className="flex-1">{children}</div>
          </li>
      );

      const AgreementPreview = ({ data }) => {
        const getLeaseEndDate = () => {
          if (!data.leaseStartDate) return 'N/A';
          const startDate = new Date(data.leaseStartDate);
          const endDate = new Date(startDate.getTime());
          endDate.setMonth(endDate.getMonth() + data.leaseTermMonths);
          endDate.setDate(endDate.getDate() - 1);
          return formatDate(endDate.toISOString().split('T')[0]);
        };

        return (
          <div className="bg-white p-8 rounded-lg shadow-lg print-area text-slate-800 leading-relaxed text-lg">
            <h1 className="text-3xl font-bold text-center mb-8 uppercase tracking-wider">Lease Agreement</h1>
            <p className="mb-6">This Lease Agreement is made and executed at <strong>{data.executionPlace}</strong> on this <strong>{formatDate(data.executionDate, { day: 'numeric' })}</strong> Day of <strong>{formatDate(data.executionDate, { month: 'long', year: 'numeric' })}</strong>.</p>
            <p className="text-center font-bold my-4">BETWEEN</p>
            <div className="mb-6">
              <p><strong>{data.lessorName}</strong>, S/o {data.lessorSonOf}, R/o {data.lessorAddress}.</p>
              <p className="font-semibold">(Hereinafter called the "LESSOR" which expression shall wherever the context so permits and requires mean to include him/his legal heirs, successors, legal representatives, executors, nominees and assignees of the One Part).</p>
            </div>
            <p className="text-center font-bold my-4">AND</p>
            <div className="mb-8">
              <p><strong>{data.lesseeName}</strong>{data.lesseeSonOf && `, S/o ${data.lesseeSonOf}`}{data.lesseeAddress && `, R/o ${data.lesseeAddress}`}.</p>
              <p className="font-semibold">(Hereinafter called the "LESSEE" which expression shall wherever the context so permits and requires mean to include its successors, legal representatives, executors, nominees, and assignees of the Other Part).</p>
            </div>
            <p className="mb-4">WHEREAS the Lessor is the owner and in physical possession of House No. <strong>{data.premisesAddress}</strong> (hereinafter called the "Said Leased Premises") and has agreed to let out the same to the Lessee.</p>
            <p className="mb-4">And the Lessee after seeing all the necessary and relevant documents of the Lessor, has accepted the Lessor as Owner in respect of the Said Leased Premises and it has also undertaken to pay the monthly rent as agreed regularly without any delay or any objection of any kind whatsoever.</p>
            <h2 className="text-xl font-semibold mt-8 mb-4 text-center">NOW THIS AGREEMENT WITNESSETH AS UNDER:</h2>
            <ol className="space-y-5">
              <Clause number={1}>That the Lessee shall pay the monthly rent of <strong>₹{formatCurrency(data.monthlyRent)}/- (Rupees {numberToWords(data.monthlyRent)} Only)</strong> to the Lessor, payable in advance on or before the 7th day of each English calendar month, and the rent shall be increased by <strong>{data.rentIncreasePercent}%</strong> annually after the completion of every one year.</Clause>
              <Clause number={2}>That the Lessee has agreed to pay an amount of <strong>₹{formatCurrency(data.securityDeposit)}/- (Rupees {numberToWords(data.securityDeposit)} Only)</strong> as an interest free security deposit which will be refundable only on handing over the physical vacant possession of the Said Leased Premises to the Lessor.</Clause>
              <Clause number={3}>That the Lessee has also agreed to pay an amount of <strong>₹{formatCurrency(data.advanceRent)}/- (Rupees {numberToWords(data.advanceRent)} Only)</strong> as an advance rent.</Clause>
              <Clause number={4}>That the Lessee shall pay the electricity charges as per respective meters of BSES Rajdhani Power Ltd in respect of the Said Leased Premises to the Lessor alongwith monthly rent.</Clause>
              <Clause number={5}>That this lease is granted for a period of <strong>{data.leaseTermMonths} months</strong> only commencing from <strong>{formatDate(data.leaseStartDate)}</strong> to <strong>{getLeaseEndDate()}</strong>.</Clause>
              <Clause number={6}>That both the parties hereby agree that there shall be a lock-in-period of <strong>{data.lockInMonths} Months</strong> from the commencement of this lease and that both the Parties shall not determine/terminate this Lease deed during the lock-in-period.</Clause>
              <Clause number={7}>That the Lessee shall use the said premises for <strong>{data.purpose}</strong> purposes only.</Clause>
              <Clause number={8}>That the Lessee shall not make or erect any permanent addition or alteration in the Said Leased Premises without obtaining the prior written permission of the Lessor, during the course of this Agreement.</Clause>
              <Clause number={9}>That the Lessee shall be responsible to attend all the minor day-to-day repairs such as fuses of bulbs and tubes, leakages/replacement of water taps etc. at his own cost but the major repairs shall be attended to by the Lessor at his own cost.</Clause>
              <Clause number={10}>That the Lessee shall not sublet assign or otherwise part with the possession of the Said Leased Premises in any manner under any circumstances.</Clause>
              <Clause number={11}>That the Lessee shall not store any inflammable material or explosive in the Said Leased Premises or do or omit to do any act which causes nuisance of annoyance and or violation of any applicable rules and law of civil authority including laws framed for protection of fire.</Clause>
              <Clause number={12}>That the Lessee shall not do or cause to be done any act or activities of illegal immoral, unsocial nature in the Said Leased Premises and also will not create any nuisance to the neighbours in any manner whatsoever.</Clause>
              <Clause number={13}>That the Lessee shall abide by all the bye-laws, rules, and regulations of the local authorities in respect of the Said Leased Premises.</Clause>
              <Clause number={14}>That the Lessee shall be responsible to restore the Said Leased Premises in the same good running condition with the fitting & fixtures therein to the Lessor, on termination/expiry of this lease agreement.</Clause>
              <Clause number={15}>That the Lessor shall pay and be liable for all dues of MCD or any other concerned authority including House Tax.</Clause>
              <Clause number={16}>That if the Lessee fails to pay monthly rent as hereby agreed upon consecutively for two months, the Lessor shall forthwith terminate the lease or the lease would stand automatically terminated without any notice and the Lessor shall have full authority to take over the possession.</Clause>
              <Clause number={17}>That any of the parties can terminate this agreement by giving <strong>{data.noticePeriodMonths} month notice</strong> to the other party or rent in lieu thereof after the lock-in period.</Clause>
              <Clause number={18}>That if the Lessee does not vacate the premises on expiry of the lease, the Lessee shall pay a penalty of <strong>₹{formatCurrency(data.penaltyPerDay)}/- per day</strong> in addition to the monthly rent till the possession of the premises is handed over to the Lessor by the Lessee.</Clause>
              <Clause number={19}>That the said lease agreement can be extended on mutual understanding by increase <strong>{data.rentIncreasePercent}%</strong> monthly rent.</Clause>
            </ol>
            <div className="mt-20">
              <p className="mb-12">IN WITNESS WHEREOF, the parties hereto have signed this Lease Agreement on the day, month and year first above written in the presence of the following witnesses.</p>
              <div className="grid grid-cols-2 gap-16 text-center mt-28">
                <div><div className="border-t border-slate-500 pt-3"><p className="font-bold">LESSOR</p><p>{data.lessorName}</p></div></div>
                <div><div className="border-t border-slate-500 pt-3"><p className="font-bold">LESSEE</p><p>{data.lesseeName}</p></div></div>
              </div>
            </div>
             <div className="mt-24 page-break-before">
              <h3 className="text-xl font-semibold mb-6">WITNESSES:</h3>
              <div className="space-y-20 mt-16">
                  <div className="flex items-end"><span className="mr-4">1.</span><div className="flex-grow border-b border-slate-500"></div></div>
                   <div className="flex items-end"><span className="mr-4">2.</span><div className="flex-grow border-b border-slate-500"></div></div>
              </div>
             </div>
          </div>
        );
      };

      // --- From App.tsx ---
      function App() {
        const { useState } = React;
        const [agreementData, setAgreementData] = useState(initialAgreementData);
        const [isGeneratingPdf, setIsGeneratingPdf] = useState(false);

        const handleDownloadPdf = async () => {
          const input = document.getElementById('printable-area');
          if (!input) {
            console.error("Printable area not found!");
            return;
          }
          const { jsPDF } = window.jspdf;
          if (!window.html2canvas || !jsPDF) {
              alert("PDF generation library is not loaded. Please check your internet connection and try again.");
              return;
          }
          setIsGeneratingPdf(true);
          try {
              const canvas = await window.html2canvas(input, { scale: 2, useCORS: true, logging: false });
              const imgData = canvas.toDataURL('image/png');
              const pdf = new jsPDF('p', 'pt', 'a4');
              const pdfWidth = pdf.internal.pageSize.getWidth();
              const pdfHeight = pdf.internal.pageSize.getHeight();
              const canvasWidth = canvas.width;
              const canvasHeight = canvas.height;
              const ratio = canvasWidth / canvasHeight;
              const imgWidth = pdfWidth - 40;
              const imgHeight = imgWidth / ratio;
              let heightLeft = imgHeight;
              let position = 20;
              pdf.addImage(imgData, 'PNG', 20, position, imgWidth, imgHeight);
              heightLeft -= (pdfHeight - 40);
              while (heightLeft > 0) {
                  position = position - pdfHeight + 40;
                  pdf.addPage();
                  pdf.addImage(imgData, 'PNG', 20, position, imgWidth, imgHeight);
                  heightLeft -= (pdfHeight - 40);
              }
              pdf.save('Commercial-Rent-Agreement.pdf');
          } catch (error) {
              console.error("Failed to generate PDF", error);
              alert("Sorry, there was an error generating the PDF.");
          } finally {
              setIsGeneratingPdf(false);
          }
        };

        return (
          <div className="min-h-screen font-sans text-slate-800">
            <header className="bg-white shadow-sm no-print">
              <div className="container mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center">
                <div className="flex items-center space-x-3">
                  <svg xmlns="http://www.w3.org/2000/svg" className="h-8 w-8 text-sky-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}>
                    <path strokeLinecap="round" strokeLinejoin="round" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                  </svg>
                  <h1 className="text-2xl font-bold text-slate-800">Commercial Rent Agreement Generator</h1>
                </div>
                <button
                  onClick={handleDownloadPdf}
                  disabled={isGeneratingPdf}
                  className="flex items-center justify-center w-48 bg-sky-600 text-white px-4 py-2 rounded-lg shadow-md hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-sky-500 focus:ring-offset-2 transition-all duration-200 disabled:bg-sky-400 disabled:cursor-not-allowed"
                >
                  {isGeneratingPdf ? (
                    <>
                      <svg className="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                        <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle>
                        <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                      </svg>
                      <span>Generating...</span>
                    </>
                  ) : (
                    <>
                      <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}>
                        <path strokeLinecap="round" strokeLinejoin="round" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
                      </svg>
                      <span>Download PDF</span>
                    </>
                  )}
                </button>
              </div>
            </header>
            
            <main className="container mx-auto p-4 sm:p-6 lg:p-8 grid grid-cols-1 lg:grid-cols-2 gap-8">
              <div className="no-print">
                <AgreementForm data={agreementData} setData={setAgreementData} />
              </div>
              <div id="printable-area">
                <AgreementPreview data={agreementData} />
              </div>
            </main>
          </div>
        );
      }

      // --- From index.tsx ---
      const rootElement = document.getElementById('root');
      const root = ReactDOM.createRoot(rootElement);
      root.render(
        <React.StrictMode>
          <App />
        </React.StrictMode>
      );
    </script>
  </body>
</html>
